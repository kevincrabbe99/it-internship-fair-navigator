# name: Firebase Hosting

# on:
#   push:
#     branches:
#       - [ master, dev]

# jobs:
#   deploy:
#     runs-on: ubuntu-latest

#     steps:
#     - uses: actions/checkout@v2

#     - name: Build Docker image
#       - uses: actions/build@v2
#       - run: |
#           cd fe
#           docker build -t itfn-fe:prod .

#     - name: Deploy to Firebase Dev Site
#     if: github.ref == 'refs/heads/dev'
#     run: |
#       cd fe
#       firebase deploy --only hosting:dev-itin
#     else:
#       run: |
#         cd fe
#         firebase deploy --only hosting:itin

# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
"on":
  push:
    branches:
      - master
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          cd fe
          docker build -t itfn-fe:prod .
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: "${{ secrets.GITHUB_TOKEN }}"
          firebaseServiceAccount: "${{ secrets.FIREBASE_SERVICE_ACCOUNT_IT_INTERNSHIP_NAVIGATOR }}"
          channelId: live
          projectId: it-internship-navigator
          entryPoint: ./fe
